{"version":3,"sources":["../pluginHost/xShell/resourcesProvider.ts"],"names":[],"mappings":"AAAA;;4DAE4D;AAC5D,YAAY,CAAC;;;;;;;;;;;;AAIb,yCAA4C;AAC5C,+DAA4D;AAG5D,2BAA6B;AAE7B;IAAuC,qCAAW;IAK9C,2BAAY,YAA2B,EAAE,cAAsB;QAA/D,YACI,iBAAO,SAGV;QAFG,KAAI,CAAC,YAAY,GAAG,YAAY,CAAC;QACjC,KAAI,CAAC,cAAc,GAAG,cAAc,CAAC;;IACzC,CAAC;IAEM,yCAAa,GAApB,UAAqB,aAAqB,EAAE,QAAgB;QAA5D,iBAYC;QAXG,IAAI,kBAAkB,GAAG,QAAQ,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;QAEtD,IAAI,gBAAgB,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,kBAAkB,GAAG,GAAG,GAAG,IAAI,CAAC,cAAc,GAAG,UAAU,CAAC,CAAC;QAC7G,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,eAAe,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;YACrE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAChC,CAAC,EAAE,UAAC,KAAK;YACL,gBAAgB,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,kBAAkB,GAAG,UAAU,CAAC,CAAC;YAC7E,MAAM,CAAC,KAAI,CAAC,YAAY,CAAC,eAAe,CAAC,gBAAgB,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ;gBACrE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;YAChC,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAEM,yCAAa,GAApB,UAAqB,UAAkB;QACnC,IAAI,CAAC,cAAc,GAAG,UAAU,CAAC;QACjC,IAAI,CAAC,aAAa,CAAC,gBAAgB,EAAE,IAAI,mCAAgB,CAAC,UAAU,CAAC,CAAC,CAAC;IAC3E,CAAC;IAEM,kDAAsB,GAA7B;QACI,MAAM,CAAC,iBAAiB,CAAC,YAAY,CAAC;IAC1C,CAAC;IACL,wBAAC;AAAD,CAjCA,AAiCC,CAjCsC,mBAAW;AAE/B,8BAAY,GAAW,kGAAkG,CAAC;AAFhI,8CAAiB","file":"xShell/resourcesProvider.js","sourcesContent":["/*---------------------------------------------------------\r\n * Copyright (C) Microsoft Corporation. All rights reserved.\r\n *--------------------------------------------------------*/\r\n\"use strict\";\r\nimport {IResourcesProvider} from \"../interfaces/iResourcesProvider\";\r\nimport {IFileProvider} from \"../interfaces/iFileProvider\";\r\nimport {Resources} from \"../common/resources\";\r\nimport {EventTarget} from \"../common/event\";\r\nimport {CultureEventArgs} from \"../common/cultureEventArgs\";\r\n\r\nimport {Promise} from \"q\";\r\nimport * as Path from \"path\";\r\n\r\nexport class ResourcesProvider extends EventTarget implements IResourcesProvider {\r\n    private fileProvider: IFileProvider;\r\n    private static genericError: string = 'An error has occurred.  Please try the operation again.\\r\\nYou can search for the error online: ';\r\n    private currentCulture: string;\r\n\r\n    constructor(fileProvider: IFileProvider, defaultCulture: string) {\r\n        super();\r\n        this.fileProvider = fileProvider;\r\n        this.currentCulture = defaultCulture;\r\n    }\r\n\r\n    public loadResources(directoryPath: string, filePath: string): Promise<Resources> {\r\n        var normalizedFilePath = filePath.replace(/\\\\/g, '/');\r\n\r\n        var resourceFileName = Path.join(directoryPath, normalizedFilePath + '.' + this.currentCulture + '.resjson');\r\n        return this.fileProvider.getFileContents(resourceFileName).then((contents) => {\r\n            return JSON.parse(contents);\r\n        }, (error) => {\r\n            resourceFileName = Path.join(directoryPath, normalizedFilePath + '.resjson');\r\n            return this.fileProvider.getFileContents(resourceFileName).then((contents) => {\r\n                return JSON.parse(contents);\r\n            });\r\n        });\r\n    }\r\n\r\n    public updateCulture(newCulture: string): void {\r\n        this.currentCulture = newCulture;\r\n        this.dispatchEvent('culturechanged', new CultureEventArgs(newCulture));\r\n    }\r\n\r\n    public getDefaultErrorMessage(): string {\r\n        return ResourcesProvider.genericError;\r\n    }\r\n}"],"sourceRoot":"/source/"}