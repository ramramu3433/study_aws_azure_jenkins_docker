/*!---------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *----------------------------------------------------------*/
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var electron_1 = require("electron");
var q_1 = require("q");
function getAuthorizationCode(url, captureUrl, silent) {
    var token = Math.random();
    return q_1.Promise(function (resolve) {
        electron_1.ipcRenderer.send("getAuthorizationCode", url, captureUrl, silent, token);
        electron_1.ipcRenderer.on("getAuthorizationCode-reply", onGetAuthorizationCodeReply);
        function onGetAuthorizationCodeReply(event, replyToken, capturedUrl) {
            if (replyToken !== token) {
                return;
            }
            electron_1.ipcRenderer.removeListener("getAuthorizationCode-reply", onGetAuthorizationCodeReply);
            resolve(capturedUrl);
        }
    });
}
exports.getAuthorizationCode = getAuthorizationCode;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9yZW5kZXJlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OERBRThEO0FBRTlELFlBQVksQ0FBQzs7QUFFYixxQ0FBOEM7QUFDOUMsdUJBQTRCO0FBRTVCLDhCQUFxQyxHQUFXLEVBQUUsVUFBa0IsRUFBRSxNQUFnQjtJQUNsRixJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDMUIsTUFBTSxDQUFDLFdBQU8sQ0FBUyxVQUFBLE9BQU87UUFDMUIsc0JBQUcsQ0FBQyxJQUFJLENBQUMsc0JBQXNCLEVBQUUsR0FBRyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDakUsc0JBQUcsQ0FBQyxFQUFFLENBQUMsNEJBQTRCLEVBQUUsMkJBQTJCLENBQUMsQ0FBQztRQUNsRSxxQ0FBcUMsS0FBSyxFQUFFLFVBQVUsRUFBRSxXQUFXO1lBQy9ELEVBQUUsQ0FBQyxDQUFDLFVBQVUsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUN2QixNQUFNLENBQUM7WUFDWCxDQUFDO1lBQ0Qsc0JBQUcsQ0FBQyxjQUFjLENBQUMsNEJBQTRCLEVBQUUsMkJBQTJCLENBQUMsQ0FBQztZQUM5RSxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDekIsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQztBQWJELG9EQWFDIiwiZmlsZSI6InJlbmRlcmVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqIENvcHlyaWdodCAoQykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5pbXBvcnQgeyBpcGNSZW5kZXJlciBhcyBpcGMgfSBmcm9tIFwiZWxlY3Ryb25cIjtcclxuaW1wb3J0IHsgUHJvbWlzZSB9IGZyb20gXCJxXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXV0aG9yaXphdGlvbkNvZGUodXJsOiBzdHJpbmcsIGNhcHR1cmVVcmw6IHN0cmluZywgc2lsZW50PzogYm9vbGVhbikge1xyXG4gICAgbGV0IHRva2VuID0gTWF0aC5yYW5kb20oKTtcclxuICAgIHJldHVybiBQcm9taXNlPHN0cmluZz4ocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgaXBjLnNlbmQoXCJnZXRBdXRob3JpemF0aW9uQ29kZVwiLCB1cmwsIGNhcHR1cmVVcmwsIHNpbGVudCwgdG9rZW4pO1xyXG4gICAgICAgIGlwYy5vbihcImdldEF1dGhvcml6YXRpb25Db2RlLXJlcGx5XCIsIG9uR2V0QXV0aG9yaXphdGlvbkNvZGVSZXBseSk7XHJcbiAgICAgICAgZnVuY3Rpb24gb25HZXRBdXRob3JpemF0aW9uQ29kZVJlcGx5KGV2ZW50LCByZXBseVRva2VuLCBjYXB0dXJlZFVybCkge1xyXG4gICAgICAgICAgICBpZiAocmVwbHlUb2tlbiAhPT0gdG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpcGMucmVtb3ZlTGlzdGVuZXIoXCJnZXRBdXRob3JpemF0aW9uQ29kZS1yZXBseVwiLCBvbkdldEF1dGhvcml6YXRpb25Db2RlUmVwbHkpO1xyXG4gICAgICAgICAgICByZXNvbHZlKGNhcHR1cmVkVXJsKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
