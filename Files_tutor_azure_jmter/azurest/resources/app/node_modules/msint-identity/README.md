# Identity (MS Internal)

The msint-identity module provides a mechanism for managing a set of user identities as accounts. It defines three concepts:

* **Account Store**: a means for persisting a list of accounts and related information;
* **Account Provider**: a means for creating a new account via an authentication mechanism and refreshing existing accounts that have become stale;
* **Account Manager**: provides integration between one or more providers and a store.

This module provides some built-in account store implementations and an account manager implementation, but has no account providers.
In order to create a functional account manager, you must reference additional modules that implement specific account providers, such as the msint-identity-aad module.

## Pre-requisites

As an MS internal module, you must configure npm to use the internal NPM registry:

```
npm set //ms-npm/:username=xxx
npm set //ms-npm/:email=xxx@microsoft.com
npm set //ms-npm/:_password=xxx
```

(You can replace "xxx" with whatever value you want, or just leave it).

## Installation

Install this module into your application using npm:

```
npm install msint-identity --registry=http://ms-npm --save
```

## Usage

Require the module in your code:

```
import * as identity from "msint-identity";
```

Create one of the built-in account stores. There is one that works in-memory:

```
let store = identity.createInMemoryAccountStore();
```

And one that saves to a JSON file:

```
let store = identity.createJsonFileAccountStore(null, ".myaccounts");
```

Create one or more account providers supplied by other modules:

```
let providers = [ ... ];
```

Lastly, create an account manager that uses the providers and store:

```
let manager = identity.createAccountManager(providers, store);
```

Now you can use the account manager to add an account using a provider:

```
manager.add("Microsoft.AzureActiveDirectory")
    .then(account => console.log(account.displayInfo.displayName));
```
